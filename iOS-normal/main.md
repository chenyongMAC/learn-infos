## main之前的加载过程

系统先读取App的可执行文件（Mach-O文件），从里面获得dyld的路径，然后加载dyld，dyld去初始化运行环境，开启缓存策略，加载程序相关依赖库(其中也包含我们的可执行文件)，并对这些库进行链接，最后调用每个依赖库的初始化方法，在这一步，runtime被初始化。当所有依赖库的初始化后，轮到最后一位(程序可执行文件)进行初始化，在这时runtime会对项目中所有类进行类结构初始化，然后调用所有的load方法。最后dyld返回main函数地址，main函数被调用，我们便来到了熟悉的程序入口。

注意：dyld会缓存上一次把信息加载内存的缓存，所以第二次比第一次启动快一点

Mach-O -- dyld、ImageLoader -- link file -- runtime init -- method load -- main


## Mach-O
Mach-O文件格式是 OS X 与 iOS 系统上的可执行文件格式，像我们编译过程产生的.O文件，以及程序的可执行文件，动态库等都是Mach-O文件。
组成部分：Header(基本信息)、LoadCommands（加载命令等）、Data

## dyld（the dynamic link editor）
源码是开源的。
在iOS开发中，为了提升系统的安全性，很多系统库文件都被打包到一个缓存的文件当中即dyld缓存。
在iOS系统中，几乎所有的程序都会用到动态库，而动态库在加载的时候都需要用dyld（位于/usr/lib/dyld）程序进行链接。很多系统库几乎都是每个程序都要用到的，与其在每个程序运行的时候一个一个将这些动态库都加载进来，还不如先把它们打包好，一次加载进来来的快。